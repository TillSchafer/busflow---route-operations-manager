---
phase: 01-loading-core-foundation
plan: 02
type: execute
wave: 2
depends_on: [01]
files_modified:
  - src/shared/loading/FullPageLoadingScreen.tsx
  - src/shared/loading/LoadingSpinner.tsx
  - src/shared/loading/loading-ui.ts
  - src/shared/loading/FullPageLoadingScreen.test.tsx
  - src/shared/loading/index.ts
autonomous: true
requirements: [LOAD-01, LOAD-02]
user_setup: []
must_haves:
  truths:
    - "Platform has one canonical full-page loading screen component."
    - "Loading screen appears with message `Lade...` fallback and faint background visual treatment."
    - "Very short visible loading periods can use a lighter visual variant."
  artifacts:
    - path: src/shared/loading/FullPageLoadingScreen.tsx
      provides: canonical full-page loading overlay UI
      min_lines: 90
    - path: src/shared/loading/LoadingSpinner.tsx
      provides: spinner abstraction with loader-15 compatibility path
      min_lines: 40
    - path: src/shared/loading/FullPageLoadingScreen.test.tsx
      provides: canonical loading UI behavior tests
      min_lines: 60
  key_links:
    - from: src/shared/loading/FullPageLoadingScreen.tsx
      to: src/shared/loading/LoadingProvider.tsx
      via: reads provider state via useLoading
    - from: src/shared/loading/LoadingSpinner.tsx
      to: src/components/ui/loader-15
      via: uses provided spinner if available, with safe fallback
---

<objective>
Implement the shared full-page loading UI that the entire platform will render.

Purpose: Convert user visual decisions into one canonical component and remove divergent fallback visuals from future integrations.
Output: FullPageLoadingScreen + spinner adapter + UI behavior tests.
</objective>

<execution_context>
@/Users/tillschafer/.codex/get-shit-done/workflows/execute-plan.md
@/Users/tillschafer/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-loading-core-foundation/01-CONTEXT.md
@.planning/phases/01-loading-core-foundation/01-RESEARCH.md
@src/shared/components/ProgressViewport.tsx
@src/shared/components/ToastViewport.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build canonical full-page loading screen component</name>
  <files>
    src/shared/loading/loading-ui.ts
    src/shared/loading/FullPageLoadingScreen.tsx
  </files>
  <action>
    Implement the canonical overlay with these locked decisions:
    - modern/elegant/minimal visual language
    - full-block interaction model (no pointer interaction with app behind overlay)
    - faint background visibility
    - default message `Lade...`
    - optional determinate percentage display when available
    - lighter visual variant for short visible durations (threshold in `loading-ui.ts`)
    Consume `useLoading` state and render only when provider indicates reveal/active state.
  </action>
  <verify>
    <automated>npm run typecheck</automated>
  </verify>
  <done>Shared loading screen reflects context decisions and no route-local styling assumptions remain in the component.</done>
</task>

<task type="auto">
  <name>Task 2: Add spinner adapter with loader-15 compatibility</name>
  <files>
    src/shared/loading/LoadingSpinner.tsx
    src/shared/loading/index.ts
  </files>
  <action>
    Create a spinner adapter that prefers `@/components/ui/loader-15` when present and falls back to existing icon-based spinner if unavailable.
    Keep adapter API stable so app visuals remain canonical regardless of implementation source.
    Do not block phase completion on package installation; execution can install loader-15 if missing.
  </action>
  <verify>
    <automated>npm run typecheck</automated>
  </verify>
  <done>Loading screen can render through one spinner abstraction and remains resilient if loader-15 is not yet installed.</done>
</task>

<task type="auto">
  <name>Task 3: Add UI behavior tests for canonical loading screen</name>
  <files>src/shared/loading/FullPageLoadingScreen.test.tsx</files>
  <action>
    Add tests validating:
    - fallback `Lade...` message rendering
    - determinate percentage appears only when progress data exists
    - overlay renders as blocking surface while keeping background visually present
    - short-load variant class/state is applied when configured threshold is met
  </action>
  <verify>
    <automated>npm run test -- src/shared/loading/FullPageLoadingScreen.test.tsx</automated>
  </verify>
  <done>Canonical loading screen behavior is regression-protected for core UI decisions.</done>
</task>

</tasks>

<verification>
The platform now has one reusable loading screen component aligned with user visual and interaction constraints.
</verification>

<success_criteria>
- [ ] FullPageLoadingScreen is the canonical loading UI component.
- [ ] Default copy fallback is `Lade...`.
- [ ] Faint background + full-block interaction model are enforced.
- [ ] Spinner adapter supports loader-15 preference with fallback.
- [ ] UI behavior tests pass.
</success_criteria>

<output>
After completion, create `.planning/phases/01-loading-core-foundation/01-02-SUMMARY.md`
</output>
